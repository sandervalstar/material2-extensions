language: node_js
node_js:
  - "8.5.0"

cache:
  directories:
    - node_modules
    - $HOME/.npm

before_install:
  - export CHROME_BIN=chromium-browser
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

install:
  - pwd
  - npm install

script:
  - pwd
  - npm test:ci

before_deploy:
  - pwd
  - npm run build:lib
  - cd material2-extensions

deploy:
  provider: npm
  email: $EMAIL_ADDRESS
  api_key: $AUTH_TOKEN
