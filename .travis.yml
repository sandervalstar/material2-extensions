sudo: required
addons:
    chrome: stable
language: node_js
node_js:
  - "8.5.0"
before_script:
    - "sudo chown root /opt/google/chrome/chrome-sandbox"
    - "sudo chmod 4755 /opt/google/chrome/chrome-sandbox"

cache:
  directories:
    - node_modules
    - $HOME/.npm

install:
  - pwd
  - npm install

test:
  - pwd
  - npm test -- --single-run

before_deploy:
  - pwd
  - npm run build:lib
  - cd material2-extensions

deploy:
  provider: npm
  email: $EMAIL_ADDRESS
  api_key: $AUTH_TOKEN
